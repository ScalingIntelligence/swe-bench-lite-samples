2024-07-03 19:39:52,992 - INFO - Environment image sweb.env.x86_64.c795f4b88616b8462021ed:latest found for sympy__sympy-22840
Building instance image sweb.eval.x86_64.sympy__sympy-22840:latest for sympy__sympy-22840
2024-07-03 19:39:52,994 - INFO - Image sweb.eval.x86_64.sympy__sympy-22840:latest already exists, skipping build.
2024-07-03 19:39:52,995 - INFO - Creating container for sympy__sympy-22840...
2024-07-03 19:39:55,620 - INFO - Container for sympy__sympy-22840 created: 1fc36996ca7dfc1688663cb7a85121eaaba0aa89f002c5eed4038bfcb9c8a1bc
2024-07-03 19:41:05,451 - INFO - Container for sympy__sympy-22840 started: 1fc36996ca7dfc1688663cb7a85121eaaba0aa89f002c5eed4038bfcb9c8a1bc
2024-07-03 19:41:05,452 - INFO - Intermediate patch for sympy__sympy-22840 written to /scratch/rse-swe-bench/unit_test_logs/evaluation_194378/model_name_managed_by_server/sympy__sympy-22840/patch.diff, now applying to container...
2024-07-03 19:41:05,875 - INFO - >>>>> Applied Patch:
Checking patch sympy/simplify/cse_main.py...
Applied patch sympy/simplify/cse_main.py cleanly.

2024-07-03 19:41:06,871 - INFO - Git diff before:
diff --git a/sympy/simplify/cse_main.py b/sympy/simplify/cse_main.py
index d649dd02a9..e7dbb7e185 100644
--- a/sympy/simplify/cse_main.py
+++ b/sympy/simplify/cse_main.py
@@ -402,10 +402,9 @@ def match_common_args(func_class, funcs, opt_subs):
         while common_arg_candidates:
             j = common_arg_candidates.pop(last=False)
 
-            com_args = arg_tracker.func_to_argset[i].intersection(
-                    arg_tracker.func_to_argset[j])
+            common_arg_candidates = OrderedSet([j])
 
-            if len(com_args) <= 1:
+            if len(common_arg_candidates) <= 1:
                 # This may happen if a set of common arguments was already
                 # combined in a previous iteration.
                 continue
@@ -413,11 +412,11 @@ def match_common_args(func_class, funcs, opt_subs):
             # For all sets, replace the common symbols by the function
             # over them, to allow recursive matches.
 
-            diff_i = arg_tracker.func_to_argset[i].difference(com_args)
+            diff_i = arg_tracker.func_to_argset[i] - common_arg_candidates
             if diff_i:
                 # com_func needs to be unevaluated to allow for recursive matches.
                 com_func = Unevaluated(
-                        func_class, arg_tracker.get_args_in_value_order(com_args))
+                        func_class, arg_tracker.get_args_in_value_order(common_arg_candidates))
                 com_func_number = arg_tracker.get_or_add_value_number(com_func)
                 arg_tracker.update_func_argset(i, diff_i | OrderedSet([com_func_number]))
                 changed.add(i)
@@ -432,13 +431,13 @@ def match_common_args(func_class, funcs, opt_subs):
                 # unevaluated version.
                 com_func_number = arg_tracker.get_or_add_value_number(funcs[i])
 
-            diff_j = arg_tracker.func_to_argset[j].difference(com_args)
+            diff_j = arg_tracker.func_to_argset[j].difference(common_arg_candidates)
             arg_tracker.update_func_argset(j, diff_j | OrderedSet([com_func_number]))
             changed.add(j)
 
             for k in arg_tracker.get_subset_candidates(
-                    com_args, common_arg_candidates):
-                diff_k = arg_tracker.func_to_argset[k].difference(com_args)
+                    common_arg_candidates, common_arg_candidates):
+                diff_k = arg_tracker.func_to_argset[k].difference(common_arg_candidates)
                 arg_tracker.update_func_argset(k, diff_k | OrderedSet([com_func_number]))
                 changed.add(k)
2024-07-03 19:41:06,964 - INFO - Eval script for sympy__sympy-22840 written to /scratch/rse-swe-bench/unit_test_logs/evaluation_194378/model_name_managed_by_server/sympy__sympy-22840/patch.diff, now applying to container...
2024-07-03 20:11:07,188 - INFO - Attempting to stop container sweb.eval.sympy__sympy-22840.evaluation_194378...
2024-07-03 20:11:09,613 - INFO - Attempting to remove container sweb.eval.sympy__sympy-22840.evaluation_194378...
2024-07-03 20:11:12,769 - INFO - Container sweb.eval.sympy__sympy-22840.evaluation_194378 removed.
