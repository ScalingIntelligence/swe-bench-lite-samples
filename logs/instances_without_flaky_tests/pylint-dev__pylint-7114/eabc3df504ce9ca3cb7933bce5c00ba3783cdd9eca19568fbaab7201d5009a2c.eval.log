2024-07-03 19:14:42,419 - INFO - Environment image sweb.env.x86_64.b649f0ff62fad147f7f073:latest found for pylint-dev__pylint-7114
Building instance image sweb.eval.x86_64.pylint-dev__pylint-7114:latest for pylint-dev__pylint-7114
2024-07-03 19:14:42,421 - INFO - Image sweb.eval.x86_64.pylint-dev__pylint-7114:latest already exists, skipping build.
2024-07-03 19:14:42,421 - INFO - Creating container for pylint-dev__pylint-7114...
2024-07-03 19:14:44,232 - INFO - Container for pylint-dev__pylint-7114 created: 30ce80c8379d45ae58c74545c16b391f11b58eccf8e9f9dbf98f995296c9bbe7
2024-07-03 19:15:51,123 - INFO - Container for pylint-dev__pylint-7114 started: 30ce80c8379d45ae58c74545c16b391f11b58eccf8e9f9dbf98f995296c9bbe7
2024-07-03 19:15:51,125 - INFO - Intermediate patch for pylint-dev__pylint-7114 written to /scratch/rse-swe-bench/unit_test_logs/evaluation_192290/model_name_managed_by_server/pylint-dev__pylint-7114/patch.diff, now applying to container...
2024-07-03 19:15:51,608 - INFO - >>>>> Applied Patch:
Checking patch pylint/lint/expand_modules.py...
Applied patch pylint/lint/expand_modules.py cleanly.

2024-07-03 19:15:52,175 - INFO - Git diff before:
diff --git a/pylint/lint/expand_modules.py b/pylint/lint/expand_modules.py
index 289e1afce..60fbfcb7b 100644
--- a/pylint/lint/expand_modules.py
+++ b/pylint/lint/expand_modules.py
@@ -23,17 +23,16 @@ def _modpath_from_file(filename: str, is_namespace: bool, path: list[str]) -> li
     )
 
 
-def get_python_path(filepath: str) -> str:
-    """TODO This get the python path with the (bad) assumption that there is always
-    an __init__.py.
+import astroid
 
-    This is not true since python 3.3 and is causing problem.
-    """
+def get_python_path(filepath: str) -> str:
     dirname = os.path.realpath(os.path.expanduser(filepath))
     if not os.path.isdir(dirname):
         dirname = os.path.dirname(dirname)
     while True:
-        if not os.path.exists(os.path.join(dirname, "__init__.py")):
+        # Check if the directory is a package by verifying the presence of __init__.py
+        # or if it's a namespace package (Python 3.3+)
+        if not (os.path.exists(os.path.join(dirname, "__init__.py")) or astroid.modutils.is_namespace_package(dirname)):
             return dirname
         old_dirname = dirname
         dirname = os.path.dirname(dirname)
2024-07-03 19:15:52,175 - INFO - Eval script for pylint-dev__pylint-7114 written to /scratch/rse-swe-bench/unit_test_logs/evaluation_192290/model_name_managed_by_server/pylint-dev__pylint-7114/patch.diff, now applying to container...
2024-07-03 19:45:52,460 - INFO - Attempting to stop container sweb.eval.pylint-dev__pylint-7114.evaluation_192290...
2024-07-03 19:45:59,228 - INFO - Attempting to remove container sweb.eval.pylint-dev__pylint-7114.evaluation_192290...
2024-07-03 19:45:59,876 - INFO - Container sweb.eval.pylint-dev__pylint-7114.evaluation_192290 removed.
