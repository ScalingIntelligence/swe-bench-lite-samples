{
  "info": {
    "duration": 167.0026216506958,
    "submission": "diff --git a/src/_pytest/_io/saferepr.py b/src/_pytest/_io/saferepr.py\nindex 23af4d0bb..00d7b58c2 100644\n--- a/src/_pytest/_io/saferepr.py\n+++ b/src/_pytest/_io/saferepr.py\n@@ -47,8 +47,8 @@ class SafeRepr(reprlib.Repr):\n             s = super().repr(x)\n         except (KeyboardInterrupt, SystemExit):\n             raise\n-        except BaseException as exc:\n-            s = _format_repr_exception(exc, x)\n+        except BaseException:\n+            return \"<Exception in repr()>\"\n         return _ellipsize(s, self.maxsize)\n \n     def repr_instance(self, x: Any, level: int) -> str:\n",
    "total_cost": 0.23722800000000002,
    "instance_id": "pytest-dev__pytest-7168",
    "evaluation_name": "run_on_remaining_250_for_july_4_t_1.6"
  },
  "name": "AgenticLoop",
  "transitions": [
    {
      "name": "SearchCode",
      "state": {
        "model": "deepseek-coder",
        "message": null,
        "max_tokens": 1000,
        "temperature": 1.6,
        "max_iterations": null,
        "max_search_results": 25,
        "support_test_files": false,
        "initial_context_tokens": 4000,
        "initial_search_results": 50,
        "include_message_history": true,
        "provide_initial_context": true,
        "initial_context_spans_per_file": 5,
        "max_retries_with_any_file_context": 3
      },
      "actions": [
        {
          "action": {
            "complete": false,
            "scratch_pad": "The issue involves an INTERNALERROR when an exception occurs in __repr__ method of a class. The traceback indicates that the error originates from pytest's handling of test execution and reporting. The search should focus on code related to exception handling, test execution, and reporting within the pytest framework. The minimal code provided shows a class with problematic __getattribute__ and __repr__ methods, which suggests looking into how pytest handles such scenarios.",
            "search_requests": [
              {
                "query": "exception handling in test execution",
                "class_names": [
                  "Node",
                  "Function"
                ],
                "code_snippet": "def repr_failure(self, excinfo, outerr=None):",
                "file_pattern": "**/src/_pytest/**/*.py",
                "function_names": [
                  "repr_failure",
                  "_repr_failure_py"
                ]
              }
            ]
          },
          "output": {
            "complete": false,
            "ranked_spans": [
              {
                "rank": 0,
                "tokens": 211,
                "span_id": "Function._prunetraceback",
                "file_path": "src/_pytest/python.py"
              },
              {
                "rank": 0,
                "tokens": 63,
                "span_id": "Function.repr_failure",
                "file_path": "src/_pytest/python.py"
              }
            ],
            "search_requests": [
              {
                "query": "exception handling in test execution",
                "class_names": [
                  "Node",
                  "Function"
                ],
                "code_snippet": "def repr_failure(self, excinfo, outerr=None):",
                "file_pattern": "**/src/_pytest/**/*.py",
                "function_names": [
                  "repr_failure",
                  "_repr_failure_py"
                ]
              }
            ]
          },
          "input_tokens": 5980,
          "output_tokens": 212,
          "retry_message": null,
          "completion_cost": 0.02112
        }
      ]
    },
    {
      "name": "IdentifyCode",
      "state": {
        "model": "deepseek-coder",
        "query": null,
        "class_name": null,
        "max_tokens": 1000,
        "temperature": 1.6,
        "code_snippet": null,
        "file_pattern": null,
        "ranked_spans": [
          {
            "rank": 0,
            "tokens": 211,
            "span_id": "Function._prunetraceback",
            "file_path": "src/_pytest/python.py"
          },
          {
            "rank": 0,
            "tokens": 63,
            "span_id": "Function.repr_failure",
            "file_path": "src/_pytest/python.py"
          }
        ],
        "function_name": null,
        "expand_context": true,
        "max_iterations": null,
        "max_prompt_file_tokens": 4000,
        "include_message_history": false
      },
      "actions": [
        {
          "action": {
            "scratch_pad": "The reported issue is about an INTERNALERROR when an exception occurs in the __repr__ method of a class. The traceback indicates that the error occurs during the repr_failure method in pytest. Analyzing the provided search results, there are several relevant sections in the file src/_pytest/python.py:\n1. The Function class that includes methods related to handling function items in pytest.\n2. The __init__ method initializes a Function object and sets various properties.\n3. The _prunetraceback method is used to prune the traceback information, which might be relevant for managing the error.\n4. Most importantly, the repr_failure method is directly related to how pytest represents failures, including exceptions. This method could be the entry point for handling the INTERNALERROR.\nGiven these findings, the identified spans are relevant to understanding and potentially fixing the issue related to the INTERNALERROR in pytest when an exception occurs in __repr__.",
            "identified_spans": [
              {
                "span_ids": [
                  "Function",
                  "Function.__init__",
                  "Function._prunetraceback",
                  "Function.repr_failure"
                ],
                "file_path": "src/_pytest/python.py"
              }
            ]
          },
          "output": {},
          "input_tokens": 4733,
          "output_tokens": 292,
          "retry_message": null,
          "completion_cost": 0.018579
        }
      ]
    },
    {
      "name": "DecideRelevance",
      "state": {
        "model": "deepseek-coder",
        "max_tokens": 1000,
        "temperature": 1.6,
        "expand_context": true,
        "max_iterations": null,
        "max_prompt_file_tokens": 4000,
        "include_message_history": false,
        "finish_after_relevant_count": 2
      },
      "actions": [
        {
          "action": {
            "complete": false,
            "relevant": true,
            "scratch_pad": "The file context provided is from the '_pytest/python.py' file, which is part of the pytest framework. It contains classes like 'Function' and 'FunctionDefinition' which are central to the execution of tests in pytest. The 'Function' class has methods like '_prunetraceback' and 'repr_failure' which are directly related to handling and representing test failures. However, the specific issue reported involves an INTERNALERROR when an exception occurs in the __repr__ method of a class. Although the file context provides insight into pytest's internal handling of test failures and tracebacks, it does not directly cover or reference the __repr__ method or its exceptions. The minimal code provided to reproduce the issue suggests modifications or fails within the __repr__ method, which is not addressed in the provided file context. Therefore, while the file context is relevant, it does not cover all aspects necessary to resolve the reported issue.",
            "search_suggestions": "Search for code or documentation related to the handling of exceptions within the __repr__ method of objects in the pytest framework. This could include looking into the '_pytest/_code/code.py' file for more detailed exception formatting or the '_pytest/_io/saferepr.py' file for safe string representations, as hinted by the traceback."
          },
          "output": {
            "message": "Search for code or documentation related to the handling of exceptions within the __repr__ method of objects in the pytest framework. This could include looking into the '_pytest/_code/code.py' file for more detailed exception formatting or the '_pytest/_io/saferepr.py' file for safe string representations, as hinted by the traceback."
          },
          "input_tokens": 4871,
          "output_tokens": 300,
          "retry_message": null,
          "completion_cost": 0.019113
        }
      ]
    },
    {
      "name": "SearchCode",
      "state": {
        "model": "deepseek-coder",
        "message": "Search for code or documentation related to the handling of exceptions within the __repr__ method of objects in the pytest framework. This could include looking into the '_pytest/_code/code.py' file for more detailed exception formatting or the '_pytest/_io/saferepr.py' file for safe string representations, as hinted by the traceback.",
        "max_tokens": 1000,
        "temperature": 1.6,
        "max_iterations": null,
        "max_search_results": 25,
        "support_test_files": false,
        "initial_context_tokens": 4000,
        "initial_search_results": 50,
        "include_message_history": true,
        "provide_initial_context": true,
        "initial_context_spans_per_file": 5,
        "max_retries_with_any_file_context": 3
      },
      "actions": [
        {
          "action": {
            "complete": false,
            "scratch_pad": "The search focuses on identifying how pytest handles exceptions within the __repr__ method of objects. The traceback suggests that the error originates from the safe string representation or detailed exception formatting within pytest. Therefore, the search should target the '_pytest/_code/code.py' and '_pytest/_io/saferepr.py' files. The provided context shows part of the 'Function' class in 'src/_pytest/python.py', which includes methods related to traceback pruning and failure representation, hinting at how pytest might handle exceptions. This context should guide the search for more specific handling of exceptions within __repr__ methods.",
            "search_requests": [
              {
                "query": "exception handling within __repr__ method",
                "class_names": [
                  "Function"
                ],
                "code_snippet": "def repr_failure(self, excinfo, outerr=None):",
                "file_pattern": "**/src/_pytest/**/*.py",
                "function_names": [
                  "repr_failure",
                  "_repr_failure_py"
                ]
              },
              {
                "query": "detailed exception formatting",
                "class_names": [
                  "FormattedExcinfo",
                  "ExceptionChainRepr",
                  "ReprExceptionInfo"
                ],
                "code_snippet": null,
                "file_pattern": "**/src/_pytest/_code/code.py",
                "function_names": []
              },
              {
                "query": "safe string representations",
                "class_names": [
                  "SafeRepr"
                ],
                "code_snippet": null,
                "file_pattern": "**/src/_pytest/_io/saferepr.py",
                "function_names": []
              }
            ]
          },
          "output": {
            "complete": false,
            "ranked_spans": [
              {
                "rank": 0,
                "tokens": 211,
                "span_id": "Function._prunetraceback",
                "file_path": "src/_pytest/python.py"
              },
              {
                "rank": 0,
                "tokens": 63,
                "span_id": "Function.repr_failure",
                "file_path": "src/_pytest/python.py"
              },
              {
                "rank": 0,
                "tokens": 366,
                "span_id": "FormattedExcinfo.repr_excinfo",
                "file_path": "src/_pytest/_code/code.py"
              },
              {
                "rank": 1,
                "tokens": 107,
                "span_id": "FormattedExcinfo.get_exconly",
                "file_path": "src/_pytest/_code/code.py"
              },
              {
                "rank": 2,
                "tokens": 139,
                "span_id": "FormattedExcinfo.repr_traceback",
                "file_path": "src/_pytest/_code/code.py"
              },
              {
                "rank": 2,
                "tokens": 45,
                "span_id": "FormattedExcinfo._makepath",
                "file_path": "src/_pytest/_code/code.py"
              },
              {
                "rank": 3,
                "tokens": 274,
                "span_id": "FormattedExcinfo.repr_traceback_entry",
                "file_path": "src/_pytest/_code/code.py"
              },
              {
                "rank": 4,
                "tokens": 131,
                "span_id": "FormattedExcinfo",
                "file_path": "src/_pytest/_code/code.py"
              },
              {
                "rank": 4,
                "tokens": 62,
                "span_id": "FormattedExcinfo.repr_args",
                "file_path": "src/_pytest/_code/code.py"
              },
              {
                "rank": 4,
                "tokens": 41,
                "span_id": "FormattedExcinfo._getentrysource",
                "file_path": "src/_pytest/_code/code.py"
              },
              {
                "rank": 4,
                "tokens": 78,
                "span_id": "FormattedExcinfo._getindent",
                "file_path": "src/_pytest/_code/code.py"
              },
              {
                "rank": 0,
                "tokens": 58,
                "span_id": "SafeRepr.repr_instance",
                "file_path": "src/_pytest/_io/saferepr.py"
              },
              {
                "rank": 0,
                "tokens": 55,
                "span_id": "SafeRepr.repr",
                "file_path": "src/_pytest/_io/saferepr.py"
              },
              {
                "rank": 0,
                "tokens": 37,
                "span_id": "SafeRepr",
                "file_path": "src/_pytest/_io/saferepr.py"
              }
            ],
            "search_requests": [
              {
                "query": "exception handling within __repr__ method",
                "class_names": [
                  "Function"
                ],
                "code_snippet": "def repr_failure(self, excinfo, outerr=None):",
                "file_pattern": "**/src/_pytest/**/*.py",
                "function_names": [
                  "repr_failure",
                  "_repr_failure_py"
                ]
              },
              {
                "query": "detailed exception formatting",
                "class_names": [
                  "FormattedExcinfo",
                  "ExceptionChainRepr",
                  "ReprExceptionInfo"
                ],
                "code_snippet": null,
                "file_pattern": "**/src/_pytest/_code/code.py",
                "function_names": []
              },
              {
                "query": "safe string representations",
                "class_names": [
                  "SafeRepr"
                ],
                "code_snippet": null,
                "file_pattern": "**/src/_pytest/_io/saferepr.py",
                "function_names": []
              }
            ]
          },
          "input_tokens": 7324,
          "output_tokens": 359,
          "retry_message": null,
          "completion_cost": 0.027357000000000003
        }
      ]
    },
    {
      "name": "IdentifyCode",
      "state": {
        "model": "deepseek-coder",
        "query": null,
        "class_name": null,
        "max_tokens": 1000,
        "temperature": 1.6,
        "code_snippet": null,
        "file_pattern": null,
        "ranked_spans": [
          {
            "rank": 0,
            "tokens": 211,
            "span_id": "Function._prunetraceback",
            "file_path": "src/_pytest/python.py"
          },
          {
            "rank": 0,
            "tokens": 63,
            "span_id": "Function.repr_failure",
            "file_path": "src/_pytest/python.py"
          },
          {
            "rank": 0,
            "tokens": 366,
            "span_id": "FormattedExcinfo.repr_excinfo",
            "file_path": "src/_pytest/_code/code.py"
          },
          {
            "rank": 1,
            "tokens": 107,
            "span_id": "FormattedExcinfo.get_exconly",
            "file_path": "src/_pytest/_code/code.py"
          },
          {
            "rank": 2,
            "tokens": 139,
            "span_id": "FormattedExcinfo.repr_traceback",
            "file_path": "src/_pytest/_code/code.py"
          },
          {
            "rank": 2,
            "tokens": 45,
            "span_id": "FormattedExcinfo._makepath",
            "file_path": "src/_pytest/_code/code.py"
          },
          {
            "rank": 3,
            "tokens": 274,
            "span_id": "FormattedExcinfo.repr_traceback_entry",
            "file_path": "src/_pytest/_code/code.py"
          },
          {
            "rank": 4,
            "tokens": 131,
            "span_id": "FormattedExcinfo",
            "file_path": "src/_pytest/_code/code.py"
          },
          {
            "rank": 4,
            "tokens": 62,
            "span_id": "FormattedExcinfo.repr_args",
            "file_path": "src/_pytest/_code/code.py"
          },
          {
            "rank": 4,
            "tokens": 41,
            "span_id": "FormattedExcinfo._getentrysource",
            "file_path": "src/_pytest/_code/code.py"
          },
          {
            "rank": 4,
            "tokens": 78,
            "span_id": "FormattedExcinfo._getindent",
            "file_path": "src/_pytest/_code/code.py"
          },
          {
            "rank": 0,
            "tokens": 58,
            "span_id": "SafeRepr.repr_instance",
            "file_path": "src/_pytest/_io/saferepr.py"
          },
          {
            "rank": 0,
            "tokens": 55,
            "span_id": "SafeRepr.repr",
            "file_path": "src/_pytest/_io/saferepr.py"
          },
          {
            "rank": 0,
            "tokens": 37,
            "span_id": "SafeRepr",
            "file_path": "src/_pytest/_io/saferepr.py"
          }
        ],
        "function_name": null,
        "expand_context": true,
        "max_iterations": null,
        "max_prompt_file_tokens": 4000,
        "include_message_history": false
      },
      "actions": [
        {
          "action": {
            "scratch_pad": "The reported issue concerns an INTERNALERROR when an exception occurs within the __repr__ method of a class. The traceback indicates that the error occurs during the execution of pytest, specifically when handling the representation of an object. The relevant code spans from the traceback suggest that the error is occurring within the pytest's internal mechanisms for handling exceptions and tracebacks. The provided search results include code spans from files such as 'src/_pytest/python.py' and 'src/_pytest/_code/code.py', which handle pytest's internal functions, traceback formatting, and exception information. These are likely relevant as they deal with the pytest's handling of tracebacks and exceptions, which is directly related to the issue at hand. The identified spans in 'src/_pytest/_code/code.py' include 'ExceptionInfo.getrepr', 'FormattedExcinfo.repr_excinfo', and 'FormattedExcinfo.repr_traceback', which are crucial for understanding and formatting exceptions and tracebacks. In 'src/_pytest/python.py', the spans 'Function.repr_failure' and 'Function._prunetraceback' are relevant as they deal with failure representation and traceback pruning, respectively. Additionally, 'src/_pytest/_io/saferepr.py' contains spans like 'SafeRepr.repr' and 'SafeRepr.repr_instance', which manage the safe representation of objects, pertinent to handling exceptions within __repr__.",
            "identified_spans": [
              {
                "span_ids": [
                  "ExceptionInfo.getrepr",
                  "FormattedExcinfo.repr_excinfo",
                  "FormattedExcinfo.repr_traceback"
                ],
                "file_path": "src/_pytest/_code/code.py"
              },
              {
                "span_ids": [
                  "Function.repr_failure",
                  "Function._prunetraceback"
                ],
                "file_path": "src/_pytest/python.py"
              },
              {
                "span_ids": [
                  "SafeRepr.repr",
                  "SafeRepr.repr_instance"
                ],
                "file_path": "src/_pytest/_io/saferepr.py"
              }
            ]
          },
          "output": {},
          "input_tokens": 9696,
          "output_tokens": 512,
          "retry_message": null,
          "completion_cost": 0.036768
        }
      ]
    },
    {
      "name": "DecideRelevance",
      "state": {
        "model": "deepseek-coder",
        "max_tokens": 1000,
        "temperature": 1.6,
        "expand_context": true,
        "max_iterations": null,
        "max_prompt_file_tokens": 4000,
        "include_message_history": false,
        "finish_after_relevant_count": 2
      },
      "actions": [
        {
          "action": {
            "complete": true,
            "relevant": true,
            "scratch_pad": "The provided file context includes relevant parts of the pytest codebase, specifically focusing on how pytest handles exceptions and their representation. The traces in the issue point to '_pytest/_code/code.py' and '_pytest/_io/saferepr.py', both of which are included in the file context provided. This indicates that the file context provided is sufficient to understand and possibly address the issue related to handling exceptions within __repr__ methods. There are detailed methods in the context that deal with traceback pruning, exception formatting, and safe string representation, which are directly relevant to the reported issue. Hence, the file context appears to contain all necessary information to address the issue.",
            "search_suggestions": null
          },
          "output": {},
          "input_tokens": 7860,
          "output_tokens": 175,
          "retry_message": null,
          "completion_cost": 0.026205
        }
      ]
    },
    {
      "name": "PlanToCode",
      "state": {
        "diff": null,
        "model": "deepseek-coder",
        "message": null,
        "max_tokens": 1000,
        "temperature": 1.6,
        "max_iterations": 8,
        "finish_on_review": false,
        "verification_errors": null,
        "max_prompt_file_tokens": 4000,
        "include_message_history": true,
        "allow_hallucinated_spans": false,
        "max_tokens_in_edit_prompt": 500,
        "expand_context_with_related_spans": true
      },
      "actions": [
        {
          "action": {
            "action": "modify",
            "finish": null,
            "reject": null,
            "span_id": "SafeRepr.repr",
            "file_path": "src/_pytest/_io/saferepr.py",
            "scratch_pad": "The issue stems from an exception being raised in the __repr__ method of a class, which causes an INTERNALERROR during pytest execution. To handle this, we need to ensure that exceptions raised during the representation of objects are properly caught and managed.",
            "instructions": "Modify the `repr` method in the `SafeRepr` class in `src/_pytest/_io/saferepr.py` to catch exceptions more gracefully, ensuring that a generic error message is returned instead of allowing the exception to propagate."
          },
          "output": {
            "span_id": "SafeRepr.repr",
            "end_line": 52,
            "file_path": "src/_pytest/_io/saferepr.py",
            "start_line": 45,
            "instructions": "Modify the `repr` method in the `SafeRepr` class in `src/_pytest/_io/saferepr.py` to catch exceptions more gracefully, ensuring that a generic error message is returned instead of allowing the exception to propagate."
          },
          "input_tokens": 8864,
          "output_tokens": 164,
          "retry_message": null,
          "completion_cost": 0.029052
        }
      ]
    },
    {
      "name": "EditCode",
      "state": {
        "model": "deepseek-coder",
        "verify": true,
        "span_id": "SafeRepr.repr",
        "end_line": 52,
        "file_path": "src/_pytest/_io/saferepr.py",
        "max_tokens": 1000,
        "start_line": 45,
        "temperature": 1.6,
        "instructions": "Modify the `repr` method in the `SafeRepr` class in `src/_pytest/_io/saferepr.py` to catch exceptions more gracefully, ensuring that a generic error message is returned instead of allowing the exception to propagate.",
        "max_iterations": 8,
        "chain_of_thought": false,
        "show_file_context": true,
        "show_initial_message": true,
        "max_prompt_file_tokens": 4000,
        "include_message_history": true
      },
      "actions": [
        {
          "action": {
            "content": "```xml\n<replace>\n    def repr(self, x: Any) -> str:\n        try:\n            s = super().repr(x)\n        except (KeyboardInterrupt, SystemExit):\n            raise\n        except BaseException:\n            return \"<Exception in repr()>\"\n        return _ellipsize(s, self.maxsize)\n</replace>"
          },
          "output": {
            "diff": "--- src/_pytest/_io/saferepr.py\n+++ src/_pytest/_io/saferepr.py\n@@ -47,8 +47,8 @@\n             s = super().repr(x)\n         except (KeyboardInterrupt, SystemExit):\n             raise\n-        except BaseException as exc:\n-            s = _format_repr_exception(exc, x)\n+        except BaseException:\n+            return \"<Exception in repr()>\"\n         return _ellipsize(s, self.maxsize)\n \n     def repr_instance(self, x: Any, level: int) -> str:\n",
            "message": "Applied the change to src/_pytest/_io/saferepr.py.\n\n<scratch_pad>\n```xml\n</scratch_pad>",
            "verification_errors": []
          },
          "input_tokens": 9170,
          "output_tokens": 81,
          "retry_message": null,
          "completion_cost": 0.028725
        }
      ]
    },
    {
      "name": "PlanToCode",
      "state": {
        "diff": "--- src/_pytest/_io/saferepr.py\n+++ src/_pytest/_io/saferepr.py\n@@ -47,8 +47,8 @@\n             s = super().repr(x)\n         except (KeyboardInterrupt, SystemExit):\n             raise\n-        except BaseException as exc:\n-            s = _format_repr_exception(exc, x)\n+        except BaseException:\n+            return \"<Exception in repr()>\"\n         return _ellipsize(s, self.maxsize)\n \n     def repr_instance(self, x: Any, level: int) -> str:\n",
        "model": "deepseek-coder",
        "message": "Applied the change to src/_pytest/_io/saferepr.py.\n\n<scratch_pad>\n```xml\n</scratch_pad>",
        "max_tokens": 1000,
        "temperature": 1.6,
        "max_iterations": 8,
        "finish_on_review": false,
        "verification_errors": [],
        "max_prompt_file_tokens": 4000,
        "include_message_history": true,
        "allow_hallucinated_spans": false,
        "max_tokens_in_edit_prompt": 500,
        "expand_context_with_related_spans": true
      },
      "actions": [
        {
          "action": {
            "action": "finish",
            "finish": "The changes in the `SafeRepr.repr` method now ensure that exceptions raised during the representation of objects are caught and handled gracefully, preventing them from causing internal errors in pytest execution.",
            "reject": null,
            "span_id": null,
            "file_path": null,
            "scratch_pad": "The changes made to the `repr` method in the `SafeRepr` class in `src/_pytest/_io/saferepr.py` should address the issue of exceptions in `__repr__` methods causing INTERNALERROR during pytest execution. The new approach catches exceptions more gracefully and returns a generic error message, preventing the exception from propagating and causing internal errors.",
            "instructions": null
          },
          "output": {
            "message": "The changes in the `SafeRepr.repr` method now ensure that exceptions raised during the representation of objects are caught and handled gracefully, preventing them from causing internal errors in pytest execution."
          },
          "input_tokens": 9223,
          "output_tokens": 176,
          "retry_message": null,
          "completion_cost": 0.030309
        }
      ]
    },
    {
      "name": "Finished",
      "state": {
        "model": "gpt-4o",
        "output": {
          "model": "deepseek-coder",
          "temperature": 1.6
        },
        "message": "The changes in the `SafeRepr.repr` method now ensure that exceptions raised during the representation of objects are caught and handled gracefully, preventing them from causing internal errors in pytest execution.",
        "max_tokens": 1000,
        "temperature": 0.0,
        "max_iterations": null,
        "include_message_history": false
      },
      "actions": []
    }
  ],
  "initial_message": "INTERNALERROR when exception in __repr__\nMinimal code to reproduce the issue: \r\n```python\r\nclass SomeClass:\r\n    def __getattribute__(self, attr):\r\n        raise\r\n    def __repr__(self):\r\n        raise\r\ndef test():\r\n    SomeClass().attr\r\n```\r\nSession traceback:\r\n```\r\n============================= test session starts ==============================\r\nplatform darwin -- Python 3.8.1, pytest-5.4.1, py-1.8.1, pluggy-0.13.1 -- /usr/local/opt/python@3.8/bin/python3.8\r\ncachedir: .pytest_cache\r\nrootdir: ******\r\nplugins: asyncio-0.10.0, mock-3.0.0, cov-2.8.1\r\ncollecting ... collected 1 item\r\n\r\ntest_pytest.py::test \r\nINTERNALERROR> Traceback (most recent call last):\r\nINTERNALERROR>   File \"/usr/local/lib/python3.8/site-packages/_pytest/main.py\", line 191, in wrap_session\r\nINTERNALERROR>     session.exitstatus = doit(config, session) or 0\r\nINTERNALERROR>   File \"/usr/local/lib/python3.8/site-packages/_pytest/main.py\", line 247, in _main\r\nINTERNALERROR>     config.hook.pytest_runtestloop(session=session)\r\nINTERNALERROR>   File \"/usr/local/lib/python3.8/site-packages/pluggy/hooks.py\", line 286, in __call__\r\nINTERNALERROR>     return self._hookexec(self, self.get_hookimpls(), kwargs)\r\nINTERNALERROR>   File \"/usr/local/lib/python3.8/site-packages/pluggy/manager.py\", line 93, in _hookexec\r\nINTERNALERROR>     return self._inner_hookexec(hook, methods, kwargs)\r\nINTERNALERROR>   File \"/usr/local/lib/python3.8/site-packages/pluggy/manager.py\", line 84, in <lambda>\r\nINTERNALERROR>     self._inner_hookexec = lambda hook, methods, kwargs: hook.multicall(\r\nINTERNALERROR>   File \"/usr/local/lib/python3.8/site-packages/pluggy/callers.py\", line 208, in _multicall\r\nINTERNALERROR>     return outcome.get_result()\r\nINTERNALERROR>   File \"/usr/local/lib/python3.8/site-packages/pluggy/callers.py\", line 80, in get_result\r\nINTERNALERROR>     raise ex[1].with_traceback(ex[2])\r\nINTERNALERROR>   File \"/usr/local/lib/python3.8/site-packages/pluggy/callers.py\", line 187, in _multicall\r\nINTERNALERROR>     res = hook_impl.function(*args)\r\nINTERNALERROR>   File \"/usr/local/lib/python3.8/site-packages/_pytest/main.py\", line 272, in pytest_runtestloop\r\nINTERNALERROR>     item.config.hook.pytest_runtest_protocol(item=item, nextitem=nextitem)\r\nINTERNALERROR>   File \"/usr/local/lib/python3.8/site-packages/pluggy/hooks.py\", line 286, in __call__\r\nINTERNALERROR>     return self._hookexec(self, self.get_hookimpls(), kwargs)\r\nINTERNALERROR>   File \"/usr/local/lib/python3.8/site-packages/pluggy/manager.py\", line 93, in _hookexec\r\nINTERNALERROR>     return self._inner_hookexec(hook, methods, kwargs)\r\nINTERNALERROR>   File \"/usr/local/lib/python3.8/site-packages/pluggy/manager.py\", line 84, in <lambda>\r\nINTERNALERROR>     self._inner_hookexec = lambda hook, methods, kwargs: hook.multicall(\r\nINTERNALERROR>   File \"/usr/local/lib/python3.8/site-packages/pluggy/callers.py\", line 208, in _multicall\r\nINTERNALERROR>     return outcome.get_result()\r\nINTERNALERROR>   File \"/usr/local/lib/python3.8/site-packages/pluggy/callers.py\", line 80, in get_result\r\nINTERNALERROR>     raise ex[1].with_traceback(ex[2])\r\nINTERNALERROR>   File \"/usr/local/lib/python3.8/site-packages/pluggy/callers.py\", line 187, in _multicall\r\nINTERNALERROR>     res = hook_impl.function(*args)\r\nINTERNALERROR>   File \"/usr/local/lib/python3.8/site-packages/_pytest/runner.py\", line 85, in pytest_runtest_protocol\r\nINTERNALERROR>     runtestprotocol(item, nextitem=nextitem)\r\nINTERNALERROR>   File \"/usr/local/lib/python3.8/site-packages/_pytest/runner.py\", line 100, in runtestprotocol\r\nINTERNALERROR>     reports.append(call_and_report(item, \"call\", log))\r\nINTERNALERROR>   File \"/usr/local/lib/python3.8/site-packages/_pytest/runner.py\", line 188, in call_and_report\r\nINTERNALERROR>     report = hook.pytest_runtest_makereport(item=item, call=call)\r\nINTERNALERROR>   File \"/usr/local/lib/python3.8/site-packages/pluggy/hooks.py\", line 286, in __call__\r\nINTERNALERROR>     return self._hookexec(self, self.get_hookimpls(), kwargs)\r\nINTERNALERROR>   File \"/usr/local/lib/python3.8/site-packages/pluggy/manager.py\", line 93, in _hookexec\r\nINTERNALERROR>     return self._inner_hookexec(hook, methods, kwargs)\r\nINTERNALERROR>   File \"/usr/local/lib/python3.8/site-packages/pluggy/manager.py\", line 84, in <lambda>\r\nINTERNALERROR>     self._inner_hookexec = lambda hook, methods, kwargs: hook.multicall(\r\nINTERNALERROR>   File \"/usr/local/lib/python3.8/site-packages/pluggy/callers.py\", line 203, in _multicall\r\nINTERNALERROR>     gen.send(outcome)\r\nINTERNALERROR>   File \"/usr/local/lib/python3.8/site-packages/_pytest/skipping.py\", line 129, in pytest_runtest_makereport\r\nINTERNALERROR>     rep = outcome.get_result()\r\nINTERNALERROR>   File \"/usr/local/lib/python3.8/site-packages/pluggy/callers.py\", line 80, in get_result\r\nINTERNALERROR>     raise ex[1].with_traceback(ex[2])\r\nINTERNALERROR>   File \"/usr/local/lib/python3.8/site-packages/pluggy/callers.py\", line 187, in _multicall\r\nINTERNALERROR>     res = hook_impl.function(*args)\r\nINTERNALERROR>   File \"/usr/local/lib/python3.8/site-packages/_pytest/runner.py\", line 260, in pytest_runtest_makereport\r\nINTERNALERROR>     return TestReport.from_item_and_call(item, call)\r\nINTERNALERROR>   File \"/usr/local/lib/python3.8/site-packages/_pytest/reports.py\", line 294, in from_item_and_call\r\nINTERNALERROR>     longrepr = item.repr_failure(excinfo)\r\nINTERNALERROR>   File \"/usr/local/lib/python3.8/site-packages/_pytest/python.py\", line 1513, in repr_failure\r\nINTERNALERROR>     return self._repr_failure_py(excinfo, style=style)\r\nINTERNALERROR>   File \"/usr/local/lib/python3.8/site-packages/_pytest/nodes.py\", line 355, in _repr_failure_py\r\nINTERNALERROR>     return excinfo.getrepr(\r\nINTERNALERROR>   File \"/usr/local/lib/python3.8/site-packages/_pytest/_code/code.py\", line 634, in getrepr\r\nINTERNALERROR>     return fmt.repr_excinfo(self)\r\nINTERNALERROR>   File \"/usr/local/lib/python3.8/site-packages/_pytest/_code/code.py\", line 879, in repr_excinfo\r\nINTERNALERROR>     reprtraceback = self.repr_traceback(excinfo_)\r\nINTERNALERROR>   File \"/usr/local/lib/python3.8/site-packages/_pytest/_code/code.py\", line 823, in repr_traceback\r\nINTERNALERROR>     reprentry = self.repr_traceback_entry(entry, einfo)\r\nINTERNALERROR>   File \"/usr/local/lib/python3.8/site-packages/_pytest/_code/code.py\", line 784, in repr_traceback_entry\r\nINTERNALERROR>     reprargs = self.repr_args(entry) if not short else None\r\nINTERNALERROR>   File \"/usr/local/lib/python3.8/site-packages/_pytest/_code/code.py\", line 693, in repr_args\r\nINTERNALERROR>     args.append((argname, saferepr(argvalue)))\r\nINTERNALERROR>   File \"/usr/local/lib/python3.8/site-packages/_pytest/_io/saferepr.py\", line 82, in saferepr\r\nINTERNALERROR>     return SafeRepr(maxsize).repr(obj)\r\nINTERNALERROR>   File \"/usr/local/lib/python3.8/site-packages/_pytest/_io/saferepr.py\", line 51, in repr\r\nINTERNALERROR>     s = _format_repr_exception(exc, x)\r\nINTERNALERROR>   File \"/usr/local/lib/python3.8/site-packages/_pytest/_io/saferepr.py\", line 23, in _format_repr_exception\r\nINTERNALERROR>     exc_info, obj.__class__.__name__, id(obj)\r\nINTERNALERROR>   File \"/usr/local/lib/python3.8/site-packages/_pytest/_io/saferepr.py\", line 47, in repr\r\nINTERNALERROR>     s = super().repr(x)\r\nINTERNALERROR>   File \"/usr/local/Cellar/python@3.8/3.8.1/Frameworks/Python.framework/Versions/3.8/lib/python3.8/reprlib.py\", line 52, in repr\r\nINTERNALERROR>     return self.repr1(x, self.maxlevel)\r\nINTERNALERROR>   File \"/usr/local/Cellar/python@3.8/3.8.1/Frameworks/Python.framework/Versions/3.8/lib/python3.8/reprlib.py\", line 62, in repr1\r\nINTERNALERROR>     return self.repr_instance(x, level)\r\nINTERNALERROR>   File \"/usr/local/lib/python3.8/site-packages/_pytest/_io/saferepr.py\", line 60, in repr_instance\r\nINTERNALERROR>     s = _format_repr_exception(exc, x)\r\nINTERNALERROR>   File \"/usr/local/lib/python3.8/site-packages/_pytest/_io/saferepr.py\", line 23, in _format_repr_exception\r\nINTERNALERROR>     exc_info, obj.__class__.__name__, id(obj)\r\nINTERNALERROR>   File \"/usr/local/lib/python3.8/site-packages/_pytest/_io/saferepr.py\", line 56, in repr_instance\r\nINTERNALERROR>     s = repr(x)\r\nINTERNALERROR>   File \"/Users/stiflou/Documents/projets/apischema/tests/test_pytest.py\", line 6, in __repr__\r\nINTERNALERROR>     raise\r\nINTERNALERROR> RuntimeError: No active exception to reraise\r\n\r\n============================ no tests ran in 0.09s ============================\r\n```\n"
}