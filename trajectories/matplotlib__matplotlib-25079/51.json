{
  "info": {
    "duration": 148.1530740261078,
    "submission": "diff --git a/lib/matplotlib/colorbar.py b/lib/matplotlib/colorbar.py\nindex 966eb0760b..9ced5d72b6 100644\n--- a/lib/matplotlib/colorbar.py\n+++ b/lib/matplotlib/colorbar.py\n@@ -510,6 +510,9 @@ class Colorbar:\n         if mappable.norm != self.norm:\n             self.norm = mappable.norm\n             self._reset_locator_formatter_scale()\n+        else:\n+            # Recalculate vmin and vmax based on the new norm\n+            self.norm.autoscale_None(mappable.get_array())\n \n         self._draw_all()\n         if isinstance(self.mappable, contour.ContourSet):\n",
    "total_cost": 0.142716,
    "instance_id": "matplotlib__matplotlib-25079",
    "evaluation_name": "run_on_remaining_250_for_july_4_t_1.6"
  },
  "name": "AgenticLoop",
  "transitions": [
    {
      "name": "SearchCode",
      "state": {
        "model": "deepseek-coder",
        "message": null,
        "max_tokens": 1000,
        "temperature": 1.6,
        "max_iterations": null,
        "max_search_results": 25,
        "support_test_files": false,
        "initial_context_tokens": 4000,
        "initial_search_results": 50,
        "include_message_history": true,
        "provide_initial_context": true,
        "initial_context_spans_per_file": 5,
        "max_retries_with_any_file_context": 3
      },
      "actions": [
        {
          "action": {
            "complete": false,
            "scratch_pad": "The issue involves setting the norm to `LogNorm` after the colorbar has been created, which results in an 'Invalid vmin' error in matplotlib 3.6.3. This behavior is different from previous versions. The relevant code snippets and classes include `ScalarMappable`, `Colorbar`, `Normalize`, and potentially `_ImageBase`. The error occurs when trying to update the norm of a `pcolormesh` plot after the colorbar is already created. To investigate this, we should focus on the `ScalarMappable` class and its interactions with `Normalize` and `Colorbar`, especially the `update_normal` method in `Colorbar` and the `norm` property in `ScalarMappable`.",
            "search_requests": [
              {
                "query": "setting norm to LogNorm after colorbar creation",
                "class_names": [
                  "ScalarMappable",
                  "Colorbar",
                  "Normalize"
                ],
                "code_snippet": null,
                "file_pattern": "**/matplotlib/**/*.py",
                "function_names": [
                  "update_normal",
                  "set_norm",
                  "_scale_norm"
                ]
              }
            ]
          },
          "output": {
            "complete": false,
            "ranked_spans": [
              {
                "rank": 0,
                "tokens": 176,
                "span_id": "ScalarMappable.norm_10",
                "file_path": "lib/matplotlib/cm.py"
              },
              {
                "rank": 2,
                "tokens": 84,
                "span_id": "ScalarMappable.autoscale_None",
                "file_path": "lib/matplotlib/cm.py"
              },
              {
                "rank": 2,
                "tokens": 84,
                "span_id": "ScalarMappable.set_norm",
                "file_path": "lib/matplotlib/cm.py"
              },
              {
                "rank": 2,
                "tokens": 61,
                "span_id": "ScalarMappable.changed",
                "file_path": "lib/matplotlib/cm.py"
              },
              {
                "rank": 2,
                "tokens": 75,
                "span_id": "ScalarMappable.autoscale",
                "file_path": "lib/matplotlib/cm.py"
              },
              {
                "rank": 7,
                "tokens": 176,
                "span_id": "ScalarMappable._scale_norm",
                "file_path": "lib/matplotlib/cm.py"
              },
              {
                "rank": 12,
                "tokens": 161,
                "span_id": "ScalarMappable.set_clim",
                "file_path": "lib/matplotlib/cm.py"
              },
              {
                "rank": 14,
                "tokens": 38,
                "span_id": "ScalarMappable",
                "file_path": "lib/matplotlib/cm.py"
              },
              {
                "rank": 15,
                "tokens": 73,
                "span_id": "ScalarMappable.set_cmap",
                "file_path": "lib/matplotlib/cm.py"
              },
              {
                "rank": 15,
                "tokens": 38,
                "span_id": "ScalarMappable.get_alpha",
                "file_path": "lib/matplotlib/cm.py"
              },
              {
                "rank": 15,
                "tokens": 11,
                "span_id": "ScalarMappable.norm",
                "file_path": "lib/matplotlib/cm.py"
              },
              {
                "rank": 10,
                "tokens": 27,
                "span_id": "Normalize.scaled",
                "file_path": "lib/matplotlib/colors.py"
              },
              {
                "rank": 10,
                "tokens": 42,
                "span_id": "Normalize.autoscale",
                "file_path": "lib/matplotlib/colors.py"
              },
              {
                "rank": 10,
                "tokens": 89,
                "span_id": "Normalize.inverse",
                "file_path": "lib/matplotlib/colors.py"
              },
              {
                "rank": 10,
                "tokens": 71,
                "span_id": "Normalize.autoscale_None",
                "file_path": "lib/matplotlib/colors.py"
              },
              {
                "rank": 11,
                "tokens": 38,
                "span_id": "Normalize.vmax_3",
                "file_path": "lib/matplotlib/colors.py"
              },
              {
                "rank": 11,
                "tokens": 12,
                "span_id": "Normalize.vmax",
                "file_path": "lib/matplotlib/colors.py"
              },
              {
                "rank": 11,
                "tokens": 37,
                "span_id": "Normalize",
                "file_path": "lib/matplotlib/colors.py"
              },
              {
                "rank": 11,
                "tokens": 38,
                "span_id": "Normalize.vmin_1",
                "file_path": "lib/matplotlib/colors.py"
              },
              {
                "rank": 11,
                "tokens": 37,
                "span_id": "Normalize._changed",
                "file_path": "lib/matplotlib/colors.py"
              },
              {
                "rank": 11,
                "tokens": 12,
                "span_id": "Normalize.vmin",
                "file_path": "lib/matplotlib/colors.py"
              },
              {
                "rank": 11,
                "tokens": 27,
                "span_id": "Normalize.clip_5",
                "file_path": "lib/matplotlib/colors.py"
              },
              {
                "rank": 11,
                "tokens": 11,
                "span_id": "Normalize.clip",
                "file_path": "lib/matplotlib/colors.py"
              },
              {
                "rank": 6,
                "tokens": 224,
                "span_id": "Colorbar.update_normal",
                "file_path": "lib/matplotlib/colorbar.py"
              },
              {
                "rank": 6,
                "tokens": 52,
                "span_id": "Colorbar.draw_all",
                "file_path": "lib/matplotlib/colorbar.py"
              },
              {
                "rank": 8,
                "tokens": 300,
                "span_id": "Colorbar._reset_locator_formatter_scale",
                "file_path": "lib/matplotlib/colorbar.py"
              }
            ],
            "search_requests": [
              {
                "query": "setting norm to LogNorm after colorbar creation",
                "class_names": [
                  "ScalarMappable",
                  "Colorbar",
                  "Normalize"
                ],
                "code_snippet": null,
                "file_pattern": "**/matplotlib/**/*.py",
                "function_names": [
                  "update_normal",
                  "set_norm",
                  "_scale_norm"
                ]
              }
            ]
          },
          "input_tokens": 5932,
          "output_tokens": 269,
          "retry_message": null,
          "completion_cost": 0.021831
        }
      ]
    },
    {
      "name": "IdentifyCode",
      "state": {
        "model": "deepseek-coder",
        "query": null,
        "class_name": null,
        "max_tokens": 1000,
        "temperature": 1.6,
        "code_snippet": null,
        "file_pattern": null,
        "ranked_spans": [
          {
            "rank": 0,
            "tokens": 176,
            "span_id": "ScalarMappable.norm_10",
            "file_path": "lib/matplotlib/cm.py"
          },
          {
            "rank": 2,
            "tokens": 84,
            "span_id": "ScalarMappable.autoscale_None",
            "file_path": "lib/matplotlib/cm.py"
          },
          {
            "rank": 2,
            "tokens": 84,
            "span_id": "ScalarMappable.set_norm",
            "file_path": "lib/matplotlib/cm.py"
          },
          {
            "rank": 2,
            "tokens": 61,
            "span_id": "ScalarMappable.changed",
            "file_path": "lib/matplotlib/cm.py"
          },
          {
            "rank": 2,
            "tokens": 75,
            "span_id": "ScalarMappable.autoscale",
            "file_path": "lib/matplotlib/cm.py"
          },
          {
            "rank": 7,
            "tokens": 176,
            "span_id": "ScalarMappable._scale_norm",
            "file_path": "lib/matplotlib/cm.py"
          },
          {
            "rank": 12,
            "tokens": 161,
            "span_id": "ScalarMappable.set_clim",
            "file_path": "lib/matplotlib/cm.py"
          },
          {
            "rank": 14,
            "tokens": 38,
            "span_id": "ScalarMappable",
            "file_path": "lib/matplotlib/cm.py"
          },
          {
            "rank": 15,
            "tokens": 73,
            "span_id": "ScalarMappable.set_cmap",
            "file_path": "lib/matplotlib/cm.py"
          },
          {
            "rank": 15,
            "tokens": 38,
            "span_id": "ScalarMappable.get_alpha",
            "file_path": "lib/matplotlib/cm.py"
          },
          {
            "rank": 15,
            "tokens": 11,
            "span_id": "ScalarMappable.norm",
            "file_path": "lib/matplotlib/cm.py"
          },
          {
            "rank": 10,
            "tokens": 27,
            "span_id": "Normalize.scaled",
            "file_path": "lib/matplotlib/colors.py"
          },
          {
            "rank": 10,
            "tokens": 42,
            "span_id": "Normalize.autoscale",
            "file_path": "lib/matplotlib/colors.py"
          },
          {
            "rank": 10,
            "tokens": 89,
            "span_id": "Normalize.inverse",
            "file_path": "lib/matplotlib/colors.py"
          },
          {
            "rank": 10,
            "tokens": 71,
            "span_id": "Normalize.autoscale_None",
            "file_path": "lib/matplotlib/colors.py"
          },
          {
            "rank": 11,
            "tokens": 38,
            "span_id": "Normalize.vmax_3",
            "file_path": "lib/matplotlib/colors.py"
          },
          {
            "rank": 11,
            "tokens": 12,
            "span_id": "Normalize.vmax",
            "file_path": "lib/matplotlib/colors.py"
          },
          {
            "rank": 11,
            "tokens": 37,
            "span_id": "Normalize",
            "file_path": "lib/matplotlib/colors.py"
          },
          {
            "rank": 11,
            "tokens": 38,
            "span_id": "Normalize.vmin_1",
            "file_path": "lib/matplotlib/colors.py"
          },
          {
            "rank": 11,
            "tokens": 37,
            "span_id": "Normalize._changed",
            "file_path": "lib/matplotlib/colors.py"
          },
          {
            "rank": 11,
            "tokens": 12,
            "span_id": "Normalize.vmin",
            "file_path": "lib/matplotlib/colors.py"
          },
          {
            "rank": 11,
            "tokens": 27,
            "span_id": "Normalize.clip_5",
            "file_path": "lib/matplotlib/colors.py"
          },
          {
            "rank": 11,
            "tokens": 11,
            "span_id": "Normalize.clip",
            "file_path": "lib/matplotlib/colors.py"
          },
          {
            "rank": 6,
            "tokens": 224,
            "span_id": "Colorbar.update_normal",
            "file_path": "lib/matplotlib/colorbar.py"
          },
          {
            "rank": 6,
            "tokens": 52,
            "span_id": "Colorbar.draw_all",
            "file_path": "lib/matplotlib/colorbar.py"
          },
          {
            "rank": 8,
            "tokens": 300,
            "span_id": "Colorbar._reset_locator_formatter_scale",
            "file_path": "lib/matplotlib/colorbar.py"
          }
        ],
        "function_name": null,
        "expand_context": true,
        "max_iterations": null,
        "max_prompt_file_tokens": 4000,
        "include_message_history": false
      },
      "actions": [
        {
          "action": {
            "scratch_pad": "Analysis of the reported issue indicates that setting a `LogNorm` after creating a colorbar is failing in matplotlib 3.6.3, specifically with an `Invalid vmin` value. This worked in previous versions, and the provided code explicitly sets vmin and vmax to values valid for `LogNorm`. The error traceback points to the `ScalarMappable.set_clim` method and the `Normalize` class as potential sources for the issue. Additionally, the `Colorbar.update_normal` method might be involved since it updates the colorbar based on the mappable's norm. Given this information, it's crucial to look at code spans that handle setting the norm, updating clim values, and updating the colorbar to understand the changes in behavior between versions.",
            "identified_spans": [
              {
                "span_ids": [
                  "ScalarMappable.__init__",
                  "ScalarMappable._scale_norm",
                  "ScalarMappable.set_clim",
                  "ScalarMappable.set_cmap",
                  "ScalarMappable.norm",
                  "ScalarMappable.norm_10",
                  "ScalarMappable.set_norm",
                  "ScalarMappable.autoscale",
                  "ScalarMappable.autoscale_None",
                  "ScalarMappable.changed"
                ],
                "file_path": "lib/matplotlib/cm.py"
              },
              {
                "span_ids": [
                  "Normalize.__init__",
                  "Normalize.vmin",
                  "Normalize.vmin_1",
                  "Normalize.vmax",
                  "Normalize.vmax_3",
                  "Normalize.clip",
                  "Normalize.clip_5",
                  "Normalize._changed",
                  "Normalize.inverse",
                  "Normalize.autoscale",
                  "Normalize.autoscale_None",
                  "Normalize.scaled"
                ],
                "file_path": "lib/matplotlib/colors.py"
              },
              {
                "span_ids": [
                  "Colorbar.update_normal",
                  "Colorbar.draw_all",
                  "Colorbar._reset_locator_formatter_scale"
                ],
                "file_path": "lib/matplotlib/colorbar.py"
              }
            ]
          },
          "output": {},
          "input_tokens": 5275,
          "output_tokens": 561,
          "retry_message": null,
          "completion_cost": 0.024239999999999998
        }
      ]
    },
    {
      "name": "DecideRelevance",
      "state": {
        "model": "deepseek-coder",
        "max_tokens": 1000,
        "temperature": 1.6,
        "expand_context": true,
        "max_iterations": null,
        "max_prompt_file_tokens": 4000,
        "include_message_history": false,
        "finish_after_relevant_count": 2
      },
      "actions": [
        {
          "action": {
            "complete": true,
            "relevant": true,
            "scratch_pad": "The provided file context contains the relevant classes and methods that could be involved in the reported issue. Specifically, the `ScalarMappable` class and its `set_norm`, `set_cmap`, `autoscale`, and `autoscale_None` methods are pertinent to the issue of setting norms and color mappings. Additionally, the `Normalize` class and its properties are relevant for understanding how norms are managed in matplotlib. The `Colorbar` class and its `update_normal` method are also directly related to the issue, as they handle updates to the colorbar when the norm changes. Given that the issue involves setting a `LogNorm` after the colorbar has been created, the interactions between `ScalarMappable`, `Normalize`, and `Colorbar` are critical. Based on the provided code, it appears that all relevant code and classes for addressing and understanding the issue have been identified.",
            "search_suggestions": null
          },
          "output": {},
          "input_tokens": 4613,
          "output_tokens": 228,
          "retry_message": null,
          "completion_cost": 0.017259
        }
      ]
    },
    {
      "name": "PlanToCode",
      "state": {
        "diff": null,
        "model": "deepseek-coder",
        "message": null,
        "max_tokens": 1000,
        "temperature": 1.6,
        "max_iterations": 8,
        "finish_on_review": false,
        "verification_errors": null,
        "max_prompt_file_tokens": 4000,
        "include_message_history": true,
        "allow_hallucinated_spans": false,
        "max_tokens_in_edit_prompt": 500,
        "expand_context_with_related_spans": true
      },
      "actions": [
        {
          "action": {
            "action": "modify",
            "finish": null,
            "reject": null,
            "span_id": "Colorbar.update_normal",
            "file_path": "lib/matplotlib/colorbar.py",
            "scratch_pad": "The issue seems to be that setting the norm to `LogNorm` after the colorbar has been created fails due to an `Invalid vmin` value. This problem likely arises from the interaction between the `ScalarMappable` and `Colorbar` classes when updating the norm. The code snippet provided shows that the norm is being updated after the colorbar is created, and this causes an error. To address this, we need to ensure that when the norm is changed, the colorbar is also updated appropriately.",
            "instructions": "Update the `Colorbar.update_normal` method to include logic that accounts for changes in the norm. Specifically, ensure that when the norm is updated, any dependent properties or states (such as vmin and vmax) are recalculated or reapplied correctly to avoid invalid states."
          },
          "output": {
            "span_id": "Colorbar.update_normal",
            "end_line": 519,
            "file_path": "lib/matplotlib/colorbar.py",
            "start_line": 493,
            "instructions": "Update the `Colorbar.update_normal` method to include logic that accounts for changes in the norm. Specifically, ensure that when the norm is updated, any dependent properties or states (such as vmin and vmax) are recalculated or reapplied correctly to avoid invalid states."
          },
          "input_tokens": 6612,
          "output_tokens": 227,
          "retry_message": null,
          "completion_cost": 0.023240999999999998
        }
      ]
    },
    {
      "name": "EditCode",
      "state": {
        "model": "deepseek-coder",
        "verify": true,
        "span_id": "Colorbar.update_normal",
        "end_line": 519,
        "file_path": "lib/matplotlib/colorbar.py",
        "max_tokens": 1000,
        "start_line": 493,
        "temperature": 1.6,
        "instructions": "Update the `Colorbar.update_normal` method to include logic that accounts for changes in the norm. Specifically, ensure that when the norm is updated, any dependent properties or states (such as vmin and vmax) are recalculated or reapplied correctly to avoid invalid states.",
        "max_iterations": 8,
        "chain_of_thought": false,
        "show_file_context": true,
        "show_initial_message": true,
        "max_prompt_file_tokens": 4000,
        "include_message_history": true
      },
      "actions": [
        {
          "action": {
            "content": "```python\n<replace>\n    def update_normal(self, mappable):\n        \"\"\"\n        Update solid patches, lines, etc.\n\n        This is meant to be called when the norm of the image or contour plot\n        to which this colorbar belongs changes.\n\n        If the norm on the mappable is different than before, this resets the\n        locator and formatter for the axis, so if these have been customized,\n        they will need to be customized again.  However, if the norm only\n        changes values of *vmin*, *vmax* or *cmap* then the old formatter\n        and locator will be preserved.\n        \"\"\"\n        _log.debug('colorbar update normal %r %r', mappable.norm, self.norm)\n        self.mappable = mappable\n        self.set_alpha(mappable.get_alpha())\n        self.cmap = mappable.cmap\n        if mappable.norm != self.norm:\n            self.norm = mappable.norm\n            self._reset_locator_formatter_scale()\n        else:\n            # Recalculate vmin and vmax based on the new norm\n            self.norm.autoscale_None(mappable.get_array())\n\n        self._draw_all()\n        if isinstance(self.mappable, contour.ContourSet):\n            CS = self.mappable\n            if not CS.filled:\n                self.add_lines(CS)\n        self.stale = True\n</replace>"
          },
          "output": {
            "diff": "--- lib/matplotlib/colorbar.py\n+++ lib/matplotlib/colorbar.py\n@@ -510,6 +510,9 @@\n         if mappable.norm != self.norm:\n             self.norm = mappable.norm\n             self._reset_locator_formatter_scale()\n+        else:\n+            # Recalculate vmin and vmax based on the new norm\n+            self.norm.autoscale_None(mappable.get_array())\n \n         self._draw_all()\n         if isinstance(self.mappable, contour.ContourSet):\n",
            "message": "Applied the change to lib/matplotlib/colorbar.py.\n\n<scratch_pad>\n```python\n</scratch_pad>",
            "verification_errors": []
          },
          "input_tokens": 8591,
          "output_tokens": 353,
          "retry_message": null,
          "completion_cost": 0.031068000000000002
        }
      ]
    },
    {
      "name": "PlanToCode",
      "state": {
        "diff": "--- lib/matplotlib/colorbar.py\n+++ lib/matplotlib/colorbar.py\n@@ -510,6 +510,9 @@\n         if mappable.norm != self.norm:\n             self.norm = mappable.norm\n             self._reset_locator_formatter_scale()\n+        else:\n+            # Recalculate vmin and vmax based on the new norm\n+            self.norm.autoscale_None(mappable.get_array())\n \n         self._draw_all()\n         if isinstance(self.mappable, contour.ContourSet):\n",
        "model": "deepseek-coder",
        "message": "Applied the change to lib/matplotlib/colorbar.py.\n\n<scratch_pad>\n```python\n</scratch_pad>",
        "max_tokens": 1000,
        "temperature": 1.6,
        "max_iterations": 8,
        "finish_on_review": false,
        "verification_errors": [],
        "max_prompt_file_tokens": 4000,
        "include_message_history": true,
        "allow_hallucinated_spans": false,
        "max_tokens_in_edit_prompt": 500,
        "expand_context_with_related_spans": true
      },
      "actions": [
        {
          "action": {
            "action": "finish",
            "finish": "The fix has been implemented in the `Colorbar.update_normal` method to properly handle updates to the norm, including recalculating vmin and vmax based on the new norm. This should resolve the issue of setting the norm to `LogNorm` after the colorbar has been created without errors.",
            "reject": null,
            "span_id": null,
            "file_path": null,
            "scratch_pad": "The change has been applied to the `Colorbar.update_normal` method to ensure that when the norm is updated, any dependent properties such as vmin and vmax are recalculated correctly to avoid invalid states. This should address the issue of setting the norm to `LogNorm` after the colorbar has been created, which was previously causing an `Invalid vmin` error in matplotlib 3.6.3. The change involves adding logic to recalculate vmin and vmax based on the new norm when the norm is updated. This ensures that the colorbar and the mappable are updated appropriately without raising errors.",
            "instructions": null
          },
          "output": {
            "message": "The fix has been implemented in the `Colorbar.update_normal` method to properly handle updates to the norm, including recalculating vmin and vmax based on the new norm. This should resolve the issue of setting the norm to `LogNorm` after the colorbar has been created without errors."
          },
          "input_tokens": 7084,
          "output_tokens": 255,
          "retry_message": null,
          "completion_cost": 0.025077000000000002
        }
      ]
    },
    {
      "name": "Finished",
      "state": {
        "model": "gpt-4o",
        "output": {
          "model": "deepseek-coder",
          "temperature": 1.6
        },
        "message": "The fix has been implemented in the `Colorbar.update_normal` method to properly handle updates to the norm, including recalculating vmin and vmax based on the new norm. This should resolve the issue of setting the norm to `LogNorm` after the colorbar has been created without errors.",
        "max_tokens": 1000,
        "temperature": 0.0,
        "max_iterations": null,
        "include_message_history": false
      },
      "actions": []
    }
  ],
  "initial_message": "[Bug]: Setting norm with existing colorbar fails with 3.6.3\n### Bug summary\r\n\r\nSetting the norm to a `LogNorm` after the colorbar has been created (e.g. in interactive code) fails with an `Invalid vmin` value in matplotlib 3.6.3.\r\n\r\nThe same code worked in previous matplotlib versions.\r\n\r\nNot that vmin and vmax are explicitly set to values valid for `LogNorm` and no negative values (or values == 0) exist in the input data.\r\n\r\n### Code for reproduction\r\n\r\n```python\r\nimport matplotlib.pyplot as plt\r\nfrom matplotlib.colors import LogNorm\r\nimport numpy as np\r\n\r\n# create some random data to fill a 2d plot\r\nrng = np.random.default_rng(0)\r\nimg = rng.uniform(1, 5, (25, 25))\r\n\r\n# plot it\r\nfig, ax = plt.subplots(layout=\"constrained\")\r\nplot = ax.pcolormesh(img)\r\ncbar = fig.colorbar(plot, ax=ax)\r\n\r\nvmin = 1\r\nvmax = 5\r\n\r\nplt.ion()\r\nfig.show()\r\nplt.pause(0.5)\r\n\r\nplot.norm = LogNorm(vmin, vmax)\r\nplot.autoscale()\r\nplt.pause(0.5)\r\n```\r\n\r\n\r\n### Actual outcome\r\n\r\n```\r\nTraceback (most recent call last):\r\n  File \"/home/mnoethe/.local/conda/envs/cta-dev/lib/python3.9/site-packages/matplotlib/backends/backend_qt.py\", line 454, in _draw_idle\r\n    self.draw()\r\n  File \"/home/mnoethe/.local/conda/envs/cta-dev/lib/python3.9/site-packages/matplotlib/backends/backend_agg.py\", line 405, in draw\r\n    self.figure.draw(self.renderer)\r\n  File \"/home/mnoethe/.local/conda/envs/cta-dev/lib/python3.9/site-packages/matplotlib/artist.py\", line 74, in draw_wrapper\r\n    result = draw(artist, renderer, *args, **kwargs)\r\n  File \"/home/mnoethe/.local/conda/envs/cta-dev/lib/python3.9/site-packages/matplotlib/artist.py\", line 51, in draw_wrapper\r\n    return draw(artist, renderer)\r\n  File \"/home/mnoethe/.local/conda/envs/cta-dev/lib/python3.9/site-packages/matplotlib/figure.py\", line 3082, in draw\r\n    mimage._draw_list_compositing_images(\r\n  File \"/home/mnoethe/.local/conda/envs/cta-dev/lib/python3.9/site-packages/matplotlib/image.py\", line 131, in _draw_list_compositing_images\r\n    a.draw(renderer)\r\n  File \"/home/mnoethe/.local/conda/envs/cta-dev/lib/python3.9/site-packages/matplotlib/artist.py\", line 51, in draw_wrapper\r\n    return draw(artist, renderer)\r\n  File \"/home/mnoethe/.local/conda/envs/cta-dev/lib/python3.9/site-packages/matplotlib/axes/_base.py\", line 3100, in draw\r\n    mimage._draw_list_compositing_images(\r\n  File \"/home/mnoethe/.local/conda/envs/cta-dev/lib/python3.9/site-packages/matplotlib/image.py\", line 131, in _draw_list_compositing_images\r\n    a.draw(renderer)\r\n  File \"/home/mnoethe/.local/conda/envs/cta-dev/lib/python3.9/site-packages/matplotlib/artist.py\", line 51, in draw_wrapper\r\n    return draw(artist, renderer)\r\n  File \"/home/mnoethe/.local/conda/envs/cta-dev/lib/python3.9/site-packages/matplotlib/collections.py\", line 2148, in draw\r\n    self.update_scalarmappable()\r\n  File \"/home/mnoethe/.local/conda/envs/cta-dev/lib/python3.9/site-packages/matplotlib/collections.py\", line 891, in update_scalarmappable\r\n    self._mapped_colors = self.to_rgba(self._A, self._alpha)\r\n  File \"/home/mnoethe/.local/conda/envs/cta-dev/lib/python3.9/site-packages/matplotlib/cm.py\", line 511, in to_rgba\r\n    x = self.norm(x)\r\n  File \"/home/mnoethe/.local/conda/envs/cta-dev/lib/python3.9/site-packages/matplotlib/colors.py\", line 1694, in __call__\r\n    raise ValueError(\"Invalid vmin or vmax\")\r\nValueError: Invalid vmin or vmax\r\n```\r\n\r\n### Expected outcome\r\n\r\nWorks, colorbar and mappable are updated with new norm.\r\n\r\n### Additional information\r\n\r\n_No response_\r\n\r\n### Operating system\r\n\r\nLinux\r\n\r\n### Matplotlib Version\r\n\r\n3.6.3 (works with 3.6.2)\r\n\r\n### Matplotlib Backend\r\n\r\nMultpiple backends tested, same error in all (Qt5Agg, TkAgg, agg, ...)\r\n\r\n### Python version\r\n\r\n3.9.15\r\n\r\n### Jupyter version\r\n\r\nnot in jupyter\r\n\r\n### Installation\r\n\r\nconda\n"
}